<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd"
  xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
  <channel>
    <title>SRV-NIX.COM</title>
    <link>http://srv-nix.com</link>
    <description>RSS feed for SRV-NIX.COM</description>
    <pubDate>Fri, 21 Mar 2014 09:00:00 -0000</pubDate>
    <item>
      <title>Настройка сервера и клиента OpenLDAP на использование TLS/SSL соединений под CentOS 6</title>
      <link>http://srv-nix.com/linux/2014/03/21/openldap-tls.html</link>
      <description>&lt;p&gt;Я не буду вникать в детали генерации сертификатов, не буду детально рассказывать про параметры в конфигурационных файлах. Эта заметка предназначена для быстрой настройки подключения и демонстрации того, что можно использовать стандартные средства консоли без рукоблудства в конфигах. &lt;/p&gt;
</description>
      <pubDate>Fri, 21 Mar 2014 09:00:00 -0000</pubDate>
      <guid>http://srv-nix.com/linux/2014/03/21/openldap-tls.html</guid>
      <dc:date>2014-03-21T09:00:00Z</dc:date>
    </item>
    <item>
      <title>Linux. 3G modem Huawei [E171]</title>
      <link>http://srv-nix.com/linux/2014/03/21/modem-huawei.html</link>
      <description>&lt;p&gt;В моем распоряжении был модем 3G от провайдера Beeline. В качестве хоста - ArchLinux на моём ноуте. Я не использую NM из идеологических соображений, фронтенд для wvdial - потому что хотелось наглядного представления времени сессии.&lt;/p&gt;
</description>
      <pubDate>Fri, 21 Mar 2014 09:00:00 -0000</pubDate>
      <guid>http://srv-nix.com/linux/2014/03/21/modem-huawei.html</guid>
      <dc:date>2014-03-21T09:00:00Z</dc:date>
    </item>
    <item>
      <title>CentOS. Подымаем аутентификацию на sssd и OpenLDAP</title>
      <link>http://srv-nix.com/linux/2014/03/21/centos-openldap.html</link>
      <description>&lt;p&gt;В &lt;a href=&quot;http://srv-nix.com/linux/2014/03/21/openldap-tls.html&quot;&gt;предыдущем&lt;/a&gt; топике я показал, как можно быстро настроить ваш сервер OpenLDAP на использование TLS соединений, чтобы наши враги не могли получить сведения из трафика между сервером и клиентом. В дополнении хотелось бы продемонстрировать настройку групповых политик доступа на сервер под управлением CentOS 6. В качестве клиента будем использовать демона SSSD, который начиная с 6.4 ветки стал сервисом аутентификации по умолчанию. &lt;/p&gt;
</description>
      <pubDate>Fri, 21 Mar 2014 09:00:00 -0000</pubDate>
      <guid>http://srv-nix.com/linux/2014/03/21/centos-openldap.html</guid>
      <dc:date>2014-03-21T09:00:00Z</dc:date>
    </item>
    <item>
      <title>FreeBSD. Munin - мониторинг на коленке</title>
      <link>http://srv-nix.com/freebsd/2014/03/20/freebsd-munin.html</link>
      <description>&lt;p&gt;Munin - простое и надежное средство для мониторинга и визуализации &amp;quot;what just happened to kill our performance?&amp;quot; проблем. Сервер представляет собой коллектор, получающий данные с любого устройства или скрипта, будь то SNMP или внешний скрипт. Данные поступают в базу RRD и затем с помощью специального скрипта (/usr/local/bin/munin-cron) визуализируются на красивых графиках.&lt;/p&gt;
</description>
      <pubDate>Thu, 20 Mar 2014 09:00:00 -0000</pubDate>
      <guid>http://srv-nix.com/freebsd/2014/03/20/freebsd-munin.html</guid>
      <dc:date>2014-03-20T09:00:00Z</dc:date>
    </item>
    <item>
      <title>Сборка ПО из SOURCE rpm пакета на сервере CentOS 6 (nginx+LDAP)</title>
      <link>http://srv-nix.com/linux/2014/02/19/build-nginx.html</link>
      <description>&lt;p&gt;&lt;em&gt;Правильная&lt;/em&gt; сборка пакетов на сервере под rpm-based системами. Никаких &amp;quot;make install&amp;quot;.  &lt;/p&gt;

&lt;!-- more --&gt;

&lt;h4&gt;Подготовка сервера к сборке&lt;/h4&gt;

&lt;p&gt;1. Для начала нужно установить пакеты:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;yum install -y rpmdevtools gcc make yum-utils &lt;span class=&quot;c&quot;&gt;# Дописать пакеты, необходимые для сборки&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;2. Добавляем в систему пользователя, от которого будет выполняться сборка:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;useradd -m rpmbuild
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;3. Готовим дерево сборки для пакетов:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;sudo -u rpmbuild -i
rpmdev-setuptree
tree -L 1 rpmbuild/
rpmbuild/
├── BUILD &lt;span class=&quot;c&quot;&gt;# Директория сборки&lt;/span&gt;
├── BUILDROOT &lt;span class=&quot;c&quot;&gt;# Директория сборки&lt;/span&gt;
├── RPMS &lt;span class=&quot;c&quot;&gt;# Содержит готовые rpm-пакеты&lt;/span&gt;
├── SOURCES &lt;span class=&quot;c&quot;&gt;# Исходные коды&lt;/span&gt;
├── SPECS &lt;span class=&quot;c&quot;&gt;# Файлы описаний (SPEC)&lt;/span&gt;
└── SRPMS &lt;span class=&quot;c&quot;&gt;# Исходные srpm-пакеты&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;Сборка собственного пакета на примере nginx+ldap&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;внимание: не выполняй сборку от имени root!!!&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;1. Все операции выполняются от пользователя rpmbuild (чтобы не нанести вред системе)&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;sudo -u rpmbuild -i 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;2. Качаем необходимые исходники/пачи/файлы
    Для nginx я взял SRC пакет из официального 
    &lt;a href=&quot;http://wiki.nginx.org/Install#Official_Red_Hat.2FCentOS_packages&quot;&gt;репозитория nginx&lt;/a&gt; для CentOS. 
    Модуль для авторизации с официального &lt;a href=&quot;https://github.com/kvspb/nginx-auth-ldap&quot;&gt;репозитория GIT&lt;/a&gt; &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~/rpmbuild/SRPMS/
&lt;span class=&quot;nv&quot;&gt;VERSION_NG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1.2.5&amp;quot;&lt;/span&gt;
wget -nd -r -l 1 -A &lt;span class=&quot;s2&quot;&gt;&amp;quot;nginx-${VERSION_NG}*src.rpm&amp;quot;&lt;/span&gt;  http://nginx.org/packages/centos/6/SRPMS/ 2&amp;gt;/dev/null
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~/rpmbuild/SOURCES/
git clone https://github.com/kvspb/nginx-auth-ldap 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;3. Устанавливаем необходимые для сборки пакеты&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;yum-builddep nginx-&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;VERSION_NG&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;-*.ngx.src.rpm --nogpgcheck 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;4. Устанавливаем пакет (он будет распакован в предварительно подготовленное дерево 
    каталогов /home/rpmbuild/rpmbuild)&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;rpm -ivh nginx-&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;VERSION_NG&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;-*.ngx.src.rpm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;5. Вносим изменения в файл сборки&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;vim ~/rpmbuild/SPECS/nginx.spec
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;6. Меняем в строке номер релиза (чтобы пакет обновился при установке)&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;---
Release: 4%&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;?dist&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;.wil
---  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;ЗАМЕЧАНИЕ:&lt;/em&gt; Я также указал суффикс wil для уникальности пакета 
7. Добавляем строку описания источника с исходными текстами модуля&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;---
Source1001: nginx-auth-ldap
--- 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;8. Добавляем модуль в параметры сборки nginx (так же как при обычной сборке)&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;---
./configure &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
--add-module&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;%&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;SOURCE1001&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
---  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;ЗАМЕЧАНИЕ:&lt;/em&gt; Возможно потребуется добавить параметры сборки дважды для debug и original версий пакета 
9. Теперь можем приступить к сборке нашего пакета&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~/rpmbuild/SPECS/
rpmbuild -bb nginx.spec 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;10. После сборки будет примерно следующая запись:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;Записан: /home/rpmbuild/rpmbuild/RPMS/x86_64/nginx-1.bla.bla.rpm
Записан: /home/rpmbuild/rpmbuild/RPMS/x86_64/nginx-debug-1.bla.bla.rpm 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;11. Это наши готовые для установки пакеты, теперь можно установить через rpm или 
     использовать локальный репозиторий для установки через yum
12. Так же рекомендую создать srpm-пакет, чтобы не потерять ваши изменения и можно было 
     развернуть его на любом сервере&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;rpmbuild -bs nginx.spec
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;13. Файл будет тут&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;Записан: /home/rpmbuild/rpmbuild/SRPMS/nginx-1.bla.bla.src.rpm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;14. PROFIT?&lt;/p&gt;
</description>
      <pubDate>Wed, 19 Feb 2014 09:00:00 -0000</pubDate>
      <guid>http://srv-nix.com/linux/2014/02/19/build-nginx.html</guid>
      <dc:date>2014-02-19T09:00:00Z</dc:date>
    </item>
    <dc:date>2014-03-21T09:00:00Z</dc:date>
  </channel>
</rss>